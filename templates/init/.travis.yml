language: node_js
sudo: false
node_js:
  - '4.2'
branches:
  except:
    - gh-pages
cache:
  bundler: true
  directories:
    - node_modules
    - $HOME/.rvm
    - $HOME/.nvm
install:
  - npm i pm2 http-server contentascode/broken-link-checker -g
  - "rvm install $(sed 's/ruby-//g' .ruby-version)"
  - bundle install
deploy:
  skip_cleanup: true
  provider: script
  script: npm run deploy
env:
  global:
    - GH_USERNAME=jmatsushita
    - CONFIG_OWNER=contentascode
    - CONFIG_REPO=docsmith-init
    - secure: >
        "vMjX60d8k1sMwfcKPVM36wUhoeq3ju5ECM0sVFsTCvO34SJFCUcbmfQk04aMSMlojp3MDGIny74UibZmgRKA6l260EdrnYR99KZr83NxTYop/1ypOH2lsuSHLqDfRDga6qRaF2KRDaPTwN5iJoYcq7X2D8jpVpp3voAnU4ojgPcd8JNXNaafAxclU0y0fAiykVdngsNrW0HyghYFKZlFMoP4LNe7LrvNqTPy0OHCzt1DhY3e65CSXqpXKXKiiRvenZ2imFAFGv/0cc/ShQReOprBG018rzFqmhIAVb6QuBZc+LHCgjTAuITceDxzHmhNJlDvhOSCNyhXEy+vWd5tGYxEM6U//6bL54dsrJKLvGgySfldXovg65NlKe/e8czx3wATZzJkPLdhA1FLtut1qfyAqYzqKy5rXBcTQibPLHROKhb6flzQoq0MnK3INl9yBNISogp2nuxiTl7dkkXLfD5qKAuNIA/ti1CKskDI687O/ANPCCP/qaCnOCkv9vgGqA3RZkhJpfxr1KWCQiIOhV6EiYj1IxopaH8bXNlQl0oJxD0wiy8c84nPnK67BGqLj5mc2SSsfCJ3ot924xbeSaFHVkV/Qud+Cm7AZkwbXU/j1s2kiqCqmrnZXiFT6k8yMV3r+2bHOU7g2aBpb1laN52NWfGQeviia7Tn1AXnj/k="
