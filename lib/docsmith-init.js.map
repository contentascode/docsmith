{"version":3,"sources":["../src/docsmith-init.js"],"names":["program","require","fs","caller","templates","init","template","arguments","option","action","templ","parse","process","argv","isEmpty","empty","force","original","run","config","path","link","defaults","verbose","console","warn"],"mappings":";;AAEA;;;;AAIA,IAAMA,UAAUC,QAAQ,WAAR,CAAhB;AACA,IAAMC,KAAKD,QAAQ,OAAR,CAAX;AACA,IAAME,SAASF,QAAQ,yBAAR,CAAf;AACA,IAAMG,YAAYH,QAAQ,2BAAR,CAAlB;AACA,IAAMI,OAAOJ,QAAQ,iBAAR,CAAb;;AAEA,IAAIK,iBAAJ;;AAEAN,QACGO,SADH,CACa,YADb,EAEGC,MAFH,CAEU,aAFV,EAEyB,2DAFzB,EAGGA,MAHH,CAGU,YAHV,EAGwB,kDAHxB,EAIGA,MAJH,CAIU,YAJV,EAIwB,gDAJxB,EAKGA,MALH,CAKU,WALV,EAKuB,kBALvB,EAMGC,MANH,CAMU,UAASC,KAAT,EAAgB;AACtBJ,aAAWI,KAAX;AACD,CARH,EASGC,KATH,CASSC,QAAQC,IATjB;;AAWA;;AAEAX,GAAGY,OAAH,CAAW,GAAX,EAAgB,UAASC,KAAT,EAAgB;AAC9B,MAAIA,SAASf,QAAQgB,KAArB,EAA4B;AAC1B,QAAIb,OAAOc,QAAP,EAAJ,EAAuB;AACrB;AACAb,gBAAUC,IAAV,CAAeC,QAAf;AACD,KAHD,MAGO;AACL;AACAD,WAAKa,GAAL,CAAS;AACPZ,gBADO;AAEPa,gBAAQhB,OAAOiB,IAAP,CAAY,IAAZ,CAFD;AAGPC,cAAMrB,QAAQqB,IAHP;AAIPC,kBAAUtB,QAAQsB,QAJX;AAKPC,iBAASvB,QAAQuB;AALV,OAAT;AAOD;AACF,GAdD,MAcO;AACLC,YAAQC,IAAR,CAAa,oFAAb;AACD;AACF,CAlBD","file":"docsmith-init.js","sourcesContent":["\n\n/**\n * Module dependencies.\n */\n\nconst program = require('commander');\nconst fs = require('extfs');\nconst caller = require('./docsmith/utils/caller');\nconst templates = require('./docsmith/init/templates');\nconst init = require('./docsmith/init');\n\nlet template;\n\nprogram\n  .arguments('[template]')\n  .option('-f, --force', 'Initialise whether the current directory is empty or not.')\n  .option('--defaults', 'Accepts defaults prompts and skips confirmation.')\n  .option('-l, --link', 'For development purposes. Link local packages.')\n  .option('--verbose', 'Display npm log.')\n  .action(function(templ) {\n    template = templ;\n  })\n  .parse(process.argv);\n\n// check if this is an empty folder.\n\nfs.isEmpty('.', function(empty) {\n  if (empty || program.force) {\n    if (caller.original()) {\n      // initialises from a built-in template\n      templates.init(template);\n    } else {\n      // called from a content as code instance, initialise from the instance configuration\n      init.run({\n        template,\n        config: caller.path(true),\n        link: program.link,\n        defaults: program.defaults,\n        verbose: program.verbose\n      });\n    }\n  } else {\n    console.warn('This directory is not empty. Aborting init. Use --force to ignore current content.');\n  }\n});\n"]}